, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category)
test <- reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category)
test
test$data[[2]]
test$data[[2]]
seq.Date(min(test$data[[2]]$Date), max(test$data[[2]]$Date))
min(test$data[[2]]$Date)
seq.Date(from = min(test$data[[2]]$Date), to = max(test$data[[2]]$Date))
seq.Date(from = min(test$data[[2]]$Date), to = max(test$data[[2]]$Date), by = 1)
seq.Date(from = min(test$data[[2]]$Date), to = max(test$data[[2]]$Date), by = "month")
seq.Date(from = min(test$data[[2]]$Date)
, to = max(test$data[[2]]$Date)
, by = "month") %>%
enframe(value = "Date")
seq.Date(from = min(test$data[[2]]$Date)
, to = max(test$data[[2]]$Date)
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data)
seq.Date(from = min(test$data[[2]]$Date)
, to = max(test$data[[2]]$Date)
, by = "month") %>%
enframe(value = "Date") %>%
left_join(test$data[[2]])
seq.Date(from = min(test$data[[2]]$Date)
, to = max(test$data[[2]]$Date)
, by = "month") %>%
enframe(value = "Date") %>%
left_join(test$data[[2]]) %>%
replace_na(list(Quantity=0))
seq.Date(from = min(test$data[[2]]$Date)
, to = max(test$data[[2]]$Date)
, by = "month") %>%
enframe(value = "Date") %>%
left_join(test$data[[2]]) %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category)
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(x) {
seq.Date(from = min(test$data[[2]]$Date)
, to = max(test$data[[2]]$Date)
, by = "month") %>%
enframe(value = "Date") %>%
left_join(test$data[[2]]) %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
}))
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]])
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data) %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
}))
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]])
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data) %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data)
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]])
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data)
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]])
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data) %>% View()
reg_values_data
reg_values_data
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]])
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
}))
test <- reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]])
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data)
test
test <- reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]])
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
}))
test <- reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]])
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
}))
test
test$data[[1]]
test$data[[1]]
test$data[[1]][nrow(test$data[[1]]),]
test$data[[1]][nrow(test$data[[1]]),]$Date
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]]+months(1))
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
}))
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]]+months(1))
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data)
test <- reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]]+months(1))
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data)
test <- reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>% as.Date()
#, key=paste0(user, "-", Regressor)
) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]]+months(1))
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
}))
test$data[[1]]
test$data[[2]]
test$data[[3]]
test$data[[4]]
lubridate::parse_date_time("2018-00-01", orders = "ymd")
message("Appending zeros to regressor's values...")
reg_values_data <- reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Year=str_sub(Year, start = -2, end=-1)
, Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>%
as.Date()) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]]+months(1))
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data)
reg_values_data
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Year=str_sub(Year, start = -2, end=-1)
, Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>%
as.Date()) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]]+months(1))
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data) %>%
mutate(Date=paste0(str_extract(Date, "^[0-9]{4}")))
reg_list_data <- purrr::map(paste0(dir_path, reg_list_files)
, .f = ~suppressMessages(readr::read_csv(.x)))
reg_values_data <- purrr::map(paste0(dir_path, reg_values_files)
, .f = ~suppressMessages(readr::read_csv(.x)))
# Naming frames
names(reg_list_data) <- stringr::str_remove_all(reg_list_files, "_reg_list.csv")
names(reg_values_data) <- stringr::str_remove_all(reg_values_files, "_reg_values.csv")
message(
paste0(names(reg_list_data)," added ", map(reg_list_data, nrow), " regressors \n")
, paste0(names(reg_values_data)," added ", map(reg_values_data, nrow), " values \n")
)
# Append zeros to the last value?
message("Appending zeros to regressor's values...")
reg_values_data <- reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Year=str_sub(Year, start = -2, end=-1)
, Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>%
as.Date()) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]]+months(1))
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data)
reg_values_data
reg_values_data %>%
mutate(Date=paste0(str_extract(Date, "^[0-9]{4}")))
reg_values_data %>%
mutate(Date=paste0(str_extract(Date, "-[0-9]{2}-")
, "-"
, str_extract(Date, "^[0-9]{4}")))
reg_values_data %>%
mutate(Date=paste0(str_extract(Date, "-([0-9]{2})-")
, "-"
, str_extract(Date, "^[0-9]{4}")))
reg_values_data %>%
mutate(Date=paste0(str_extract(Date, "(?<=-)[0-9]{2}(?=-)")
, "-"
, str_extract(Date, "^[0-9]{4}")))
reg_values_data %>%
mutate(Date=paste0(str_extract(Date, "(?<=-)[0-9]{2}(?=-)")
, "-01-"
, str_extract(Date, "^[0-9]{4}")))
reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Year=str_sub(Year, start = -2, end=-1)
, Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>%
as.Date()) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]]+months(1))
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data) %>%
mutate(Date=paste0(str_extract(Date, "(?<=-)[0-9]{2}(?=-)")
, "-01-"
, str_extract(Date, "^[0-9]{4}")))
reg_list_data <- purrr::map(paste0(dir_path, reg_list_files)
, .f = ~suppressMessages(readr::read_csv(.x)))
reg_values_data <- purrr::map(paste0(dir_path, reg_values_files)
, .f = ~suppressMessages(readr::read_csv(.x)))
# Naming frames
names(reg_list_data) <- stringr::str_remove_all(reg_list_files, "_reg_list.csv")
names(reg_values_data) <- stringr::str_remove_all(reg_values_files, "_reg_values.csv")
message(
paste0(names(reg_list_data)," added ", map(reg_list_data, nrow), " regressors \n")
, paste0(names(reg_values_data)," added ", map(reg_values_data, nrow), " values \n")
)
# Getting files' data
reg_list_files <- list.files(dir_path, pattern = "[0-9]_reg_list.csv")
reg_values_files <- list.files(dir_path, pattern = "[0-9]_reg_values.csv")
# loading data
reg_list_data <- purrr::map(paste0(dir_path, reg_list_files)
, .f = ~suppressMessages(readr::read_csv(.x)))
reg_values_data <- purrr::map(paste0(dir_path, reg_values_files)
, .f = ~suppressMessages(readr::read_csv(.x)))
# Naming frames
names(reg_list_data) <- stringr::str_remove_all(reg_list_files, "_reg_list.csv")
names(reg_values_data) <- stringr::str_remove_all(reg_values_files, "_reg_values.csv")
message(
paste0(names(reg_list_data)," added ", map(reg_list_data, nrow), " regressors \n")
, paste0(names(reg_values_data)," added ", map(reg_values_data, nrow), " values \n")
)
reg_list_files <- list.files(dir_path, pattern = "[0-9]_reg_list.csv")
reg_values_files <- list.files(dir_path, pattern = "[0-9]_reg_values.csv")
reg_values_data <- purrr::map(paste0(dir_path, reg_values_files)
, .f = ~suppressMessages(readr::read_csv(.x)))
reg_values_data
message(
paste0(names(reg_list_data)," added ", map(reg_list_data, nrow), " regressors \n")
, paste0(names(reg_values_data)," added ", map(reg_values_data, nrow), " values \n")
)
reg_list_data <- purrr::map(paste0(dir_path, reg_list_files)
, .f = ~suppressMessages(readr::read_csv(.x)))
reg_list_data
names(reg_list_data) <- stringr::str_remove_all(reg_list_files, "_reg_list.csv")
names(reg_values_data) <- stringr::str_remove_all(reg_values_files, "_reg_values.csv")
message(
paste0(names(reg_list_data)," added ", map(reg_list_data, nrow), " regressors \n")
, paste0(names(reg_values_data)," added ", map(reg_values_data, nrow), " values \n")
)
reg_values_data
reg_values_data <- reg_values_data %>%
bind_rows(.id = "user") %>%
mutate(Year=str_sub(Year, start = -2, end=-1)
, Date=lubridate::parse_date_time(paste0(Year,"-", Month, "-", "01")
, orders = "ymd") %>%
as.Date()) %>%
dplyr::select(-Month, -Year) %>%
group_nest(user, Regressor, Category) %>%
mutate(data=map(data, function(data) {
seq.Date(from = min(data[["Date"]])
, to = max(data[["Date"]]+months(1))
, by = "month") %>%
enframe(value = "Date") %>%
left_join(data, by="Date") %>%
replace_na(list(Quantity=0)) %>%
dplyr::select(-name)
})) %>%
unnest(data) %>%
mutate(Date=paste0(str_extract(Date, "(?<=-)[0-9]{2}(?=-)")
, "-01-"
, str_extract(Date, "^[0-9]{4}")))
reg_values_data
added_reg_values <- reg_values_data %>%
dplyr::select(user, Regressor, Category, Date, Quantity)
added_reg_values
added_reg_list <- bind_rows(reg_list_data, .id = "user") %>%
mutate(Select="N") %>%
dplyr::select(user, Select, Name, Category)
document()
require(devtools)
document()
check()
check()
install("nnet")
install.packages("nnet")
install.packages("nnet")
install.packages("nnet")
check()
require(devtools)
document()
check()
build()
install.packages("~/Projects/Packages/sftools_0.1.3.0.tar.gz", repos = NULL, type = "source")
dir_path
dir_path="C:/Users/I0415596/Desktop/"
# Getting files' data
reg_list_files <- list.files(dir_path, pattern = "[0-9]_reg_list.csv")
reg_values_files <- list.files(dir_path, pattern = "[0-9]_reg_values.csv")
# loading data
reg_list_data <- purrr::map(paste0(dir_path, reg_list_files)
, .f = ~suppressMessages(readr::read_csv(.x)))
reg_values_data <- purrr::map(paste0(dir_path, reg_values_files)
, .f = ~suppressMessages(readr::read_csv(.x)))
reg_list_data
require(tibble)
require(devtools)
document()
check()
check()
check()
build()
